"use strict";console.log(">> Ready :)");let dataSearch=[];const filmList=document.querySelector(".js-films"),inputValue=document.querySelector(".js-search"),searchBtn=document.querySelector(".js-btn");searchBtn.addEventListener("click",addListenerSearchClick);let dataFilms=[];function addListenerSearchClick(){const e=inputValue.value;dataFilms=[],fetch("http://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{console.log("Han llegado"),console.log(e),e.forEach(e=>{dataFilms.push(e.show)}),renderFilms(dataFilms)})}function renderFilms(e){filmList.innerHTML="";let a="",s="";for(let l=0;l<e.length;l++)a=null===e[l].image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":e[l].image.medium,s+=`\n         <li id ="${e[l].id}" class="films-each js-cards">\n            <div class="films-each__container">\n              <img src="${a}" alt="" class="films-each__container--photo">\n              <h3 class="films-each__container--text">${e[l].name}</h3>\n            </div>\n         </li>`;filmList.innerHTML=s,addListenersToCardsFilms()}console.log("siguiente linea"),console.log(filmList);const filmsFav=document.querySelector(".js-favorite");let newFav=[];function addListenersToCardsFilms(){const e=document.querySelectorAll(".js-cards");console.log(e);for(const a of e)a.addEventListener("click",handlerFavorite)}function handlerFavorite(e){const a=e.currentTarget;let s=e.currentTarget.id;const l=newFav.find(e=>e.id===parseInt(s));if(null==l){a.classList.add("select-fav"),a.classList.remove("films-each__container");const e=dataFilms.find(e=>e.id===parseInt(s));newFav.push(e)}else{a.classList.remove("select-fav"),a.classList.add("films-each__container");const e=newFav.indexOf(l);newFav.splice(e,1)}localStorage.setItem("films",JSON.stringify(newFav)),console.log(newFav);let n="",t="";for(let e=0;e<newFav.length;e++)n=null===newFav[e].image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":newFav[e].image.medium,t+=`\n         <li id ="${newFav[e].id}" class="films-each js-cards">\n            <div class="films-each__container">\n              <img src="${n}" alt="" class="films-each__container--photo">\n              <h3 class="films-each__container--text">${newFav[e].name}</h3>\n            </div>\n         </li>`;filmsFav.innerHTML='<h3 class="favorite__title">Pelis favoritas</h3>'+t}if(null===localStorage.getItem("films"));else{newFav=JSON.parse(localStorage.getItem("films"));let e="",a="";for(let s=0;s<newFav.length;s++)e=null===newFav[s].image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":newFav[s].image.medium,a+=`\n         <li id ="${newFav[s].id}" class="films-each js-cards">\n            <div class="films-each__container">\n              <img src="${e}" alt="" class="films-each__container--photo">\n              <h3 class="films-each__container--text">${newFav[s].name}</h3>\n            </div>\n         </li>`;filmsFav.innerHTML='<h3 class="favorite__title">Pelis favoritas</h3>'+a}